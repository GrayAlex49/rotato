# Repository Guidelines

## Project Structure & Module Organization
Core application code lives under `src/rotato/`, with modules split by responsibility: `core.py` orchestrates rotation, `config.py` handles YAML parsing, and `platform/` provides OS-specific helpers. Image utilities sit in `images.py` and `wallpaper.py`. Tests mirror this layout in `tests/`, matching module names for quick discovery. CLI helpers that simplify setup (`detect_monitors.py`, `setup_autostart.py`) reside in `scripts/`. The root houses configuration samples (`config.yaml.example`) and project metadata (`pyproject.toml`).

## Build, Test, and Development Commands
- `uv venv` creates a `.venv/` aligned with the project interpreter; activate it via `.venv\Scripts\activate` (Windows) or `source .venv/bin/activate` (Unix).
- `uv pip install -e ".[dev]"` installs rotato plus dev extras (pytest, Ruff, mypy).
- `uv run python -m rotato --help` checks the CLI entry point end-to-end.
- `uv run pytest` executes the full suite with coverage reports (`--cov=rotato` preconfigured).
- `uv run hatch build` produces a wheel for local installs or distribution.

## Coding Style & Naming Conventions
Follow standard Python 3 style with 4-space indentation and descriptive, lowercase module names. Ruff enforces formatting and linting; keep lines ≤100 characters and resolve `ruff check src tests` findings before pushing. Use snake_case for functions and variables, PascalCase for classes, and prefer explicit type hints because `mypy` runs with strict warnings. Configuration keys in YAML should remain lowercase with hyphens.

## Testing Guidelines
Tests use `pytest` with coverage configured to fail on missing lines (`--cov=rotato --cov-report=term-missing`). Add new tests under `tests/` using the `test_<module>.py` naming pattern and `Test*` classes when grouping cases. When debugging coverage, inspect `htmlcov/index.html` generated by the default command. Keep coverage from regressing on touched modules; add regression tests whenever bugs are fixed.

## Commit & Pull Request Guidelines
Recent history shows concise, imperative commit subjects (e.g., “Add monitor detection helper script”). Keep the summary under 72 characters, add detail in the body only when necessary, and reference issue IDs inline (e.g., “Refs #12”). For pull requests, provide: 1) a short problem/solution summary, 2) a checklist of commands run (tests, lint, type checks), and 3) screenshots or log excerpts when UI behavior or monitor detection changes. Call out configuration updates so reviewers can test with the new defaults.

## Configuration Tips
Copy `config.yaml.example` to `config.yaml` and adjust paths per workstation. Run `python scripts/detect_monitors.py` whenever displays change, and review generated mappings into version control only after stripping machine-specific identifiers.
